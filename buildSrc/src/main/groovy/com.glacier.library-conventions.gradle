plugins {
    id "java-library"
}

// 指定仓库
repositories {
    mavenLocal()
    maven { url "https://maven.aliyun.com/repository/public" }
}

configurations {
    // 全局排除依赖
    configureEach {
        // 解决activiti 7 依赖问题
        exclude group: "org.activiti.core.common", module: "activiti-core-common-dependencies"
        exclude group: "org.activiti.api", module: "activiti-api-dependencies"
        // 解决easyExcel 升级poi 5 依赖问题
        exclude group: "org.apache.poi", module: "poi-ooxml-schemas"
        // 排除junit
        exclude group: "junit", module: "junit"
        exclude group: "org.junit.vintage", module: "junit-vintage-engine"
    }
}

ext {
    springBoot = "3.2.0"
    shiro = "1.13.0"
    springBootAdmin = "3.1.8"

    camunda = "7.20.0"
    activiti6 = "6.0.0"
    activiti7 = "7.1.0.M6"

    activitiModeler = "5.23.0"

    easyexcel = "3.3.2"
    // easyexcel 支持poi的版本
    poi = "5.2.4"
}

dependencies {
    // 引入其他 bom
    api platform("org.springframework.boot:spring-boot-dependencies:${springBoot}")
    api platform("cn.hutool:hutool-bom:5.8.23")

    //在constraints块中定义依赖版本约束
    constraints {
        api "org.apache.shiro:shiro-spring-boot-starter:${shiro}"
        api "org.apache.shiro:shiro-spring-boot-web-starter:${shiro}"

        api "de.codecentric:spring-boot-admin-starter-server:${springBootAdmin}"
        api "de.codecentric:spring-boot-admin-starter-client:${springBootAdmin}"

        api "org.apache.rocketmq:rocketmq-spring-boot-starter:2.2.3"

        // mybatis-plus
        api "com.baomidou:mybatis-plus-boot-starter:3.5.4.1"
        api "com.baomidou:dynamic-datasource-spring-boot-starter:4.2.0"
        // mybatis mapper
        api "tk.mybatis:mapper-spring-boot-starter:4.2.3"
        // mybatis
        api "org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.3"
        api "com.github.pagehelper:pagehelper-spring-boot-starter:2.0.0"
        api "com.alibaba:druid-spring-boot-starter:1.2.20"
        api "com.github.ulisesbocchio:jasypt-spring-boot-starter:3.0.5"

        // camunda
        api "org.camunda.bpm.springboot:camunda-bpm-spring-boot-starter-webapp:${camunda}"
        api "org.camunda.bpm.springboot:camunda-bpm-spring-boot-starter-rest:${camunda}"

        // activiti 6
        api "org.activiti:activiti-spring-boot-starter-basic:${activiti6}"
        api "org.activiti:activiti-spring-boot-starter-jpa:${activiti6}"
        // activiti 7

        api "org.activiti:activiti-spring-boot-starter:${activiti7}"
        api "org.activiti:activiti-image-generator:${activiti7}"
        // activiti-modeler
        api "org.activiti:activiti-modeler:${activitiModeler}"
        api "org.activiti:activiti-diagram-rest:${activitiModeler}"
        
        // openapi
        api 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.0.2'
        api "io.springfox:springfox-boot-starter:3.0.0"

        // 其他
        api "com.alibaba:easyexcel:${easyexcel}"
        api "org.apache.poi:poi:${poi}"
        api "org.apache.poi:poi-ooxml:${poi}"
        api "commons-io:commons-io:2.15.0"
        api "org.apache.commons:commons-lang3:3.14.0"

        api "org.junit.jupiter:junit-jupiter:5.10.1"
    }
}
